<% is_search_active = params[:player] || params[:target]  || params[:target] %>
<details <%= 'open' if is_search_active %> %>
  <summary>Rechercher <%if is_search_active%> <mark>résultats filtrés</mark> <% end %></summary>
  <%= form_with(method: :get) do |form| %>
    <%= form.label :player, Card.human_attribute_name("player") %>
    <%= form.select :player, options_for_select(players_list, params[:player]), include_blank: true %>
    <%= form.label :action, Card.human_attribute_name("action") %>
    <%= form.select :card_action, options_for_select(actions_list, params[:card_action]), include_blank: true %>
    <%= form.submit "Rechercher" %>
  <% end %>
</details>
<figure>
  <table>
    <tr>
      <th></th>
      <th><%= Card.human_attribute_name("player") %></th>
      <th><%= Card.human_attribute_name("action") %></th>
      <th><%= Card.human_attribute_name("target") %></th>
      <th>Actions</th>
    </tr>
    <% cards.each do |card| %>
      <tr>
        <td><%= render("cards/form", card: card) %></td>
        <td><%= render 'games/player', player: card.player %></td>
        <td><%= card.action %></td>
        <td><%= card.target %></td>
        <td>
          <%= link_to 'Lien de la carte', public_card_path(card.token) %>
        </td>
      </tr>
    <% end %>
  </table>
</figure>
